# Minimal GL


# 解説

PC Intro 作成ツールです。
GLSL に対応しています。

PC Intro とは、数キロバイト程度の小さな実行ファイルで映像と音を生成し、
その内容で優劣を競うメガデモ（デモシーン）のカテゴリです。  
PC Intro の実行ファイルは、単体で動作することが要求されます。
外部ファイルやネットワーク上のデータを参照することは禁止されています（例外として OS に標準装備されている dll などの利用は許可されています）。
映像と音いずれも実行時に何らかのアルゴリズムにより生成する必要があります。
そして、いかにファイルサイズを小さくするかが重要です。  

PC Intro には、
ファイルサイズ 1024 バイト未満の PC 1K Intro、
4096 バイト未満の PC 4K Intro、
8192 バイト未満の PC 8K Intro、
65536 バイト未満の PC 64K Intro
などのサブカテゴリがあります。
Minimal GL は、このうち PC 4K Intro の作成に特化したツールです。


# スクリーンショット
![screen_shot_gfx](https://user-images.githubusercontent.com/11882108/82467562-c1ad0800-9afc-11ea-8582-5ef5dbdf2e0f.png)
![screen_shot_snd](https://user-images.githubusercontent.com/11882108/82468262-8fe87100-9afd-11ea-8f94-ebf531cb53be.png)


# 準備

Minimal GL を利用するには、
事前に以下のツールをパスの通ったディレクトリにインストールする必要があります。

1. shader_minifier.exe  
	https://github.com/laurentlb/Shader_Minifier/releases


2. crinkler.exe  
	http://www.crinkler.net/


# 簡易チュートリアル

1. シェーダファイルを用意する  
	一から記述するのは少々面倒なので、
	example/ 以下の適当な *.gfx.glsl *.snd.glsl ファイルからコピーしてください。

2. グラフィクスシェーダファイルを開く  
	メインウィンドウに \*.gfx.glsl ファイルをドラッグ＆ドロップするか、
	メニューから [File]→[Open Graphics Shader] を選択し、\*.gfx.glsl ファイルを読み込みます。

3. サウンドシェーダファイルを開く  
	メインウィンドウに \*.snd.glsl ファイルをドラッグ＆ドロップするか、
	メニューから [File]→[Open Sound Shader] を選択し、\*.snd.glsl ファイルを読み込みます。

4. シェーダの修正  
	本ツールは、シェーダのエディット機能は持ちません。
	シェーダの修正は、ユーザーお手持ちのテキストエディタ等で行ってください。
	現在描画中（再生中）の glsl ファイルのタイムスタンプが更新されると、
	直ちにリコンパイルされ、描画結果に反映されます。

5. 実行ファイルにエクスポート  
	メニューから [File]→[Export Executable] を選択します。
	Output file に生成する実行ファイル名を指定し、OK を押します。

6. 完成  


# 機能一覧

- シェーダよるグラフィクス描画  
	画面全体に一枚の四角形ポリゴンを表示し、フラグメントシェーダにより描画を行います。

- シェーダよるサウンド生成  
	コンピュートシェーダによるサウンド生成を行います。

- シェーダホットリロード  
	シェーダファイルが更新されると、直ちに自動リロードを行います。
	現在時刻をリセットせずにリロードする機能も提供されています（ライブコーディング用途を想定）。

- 実行ファイルエクスポート  
	現在のグラフィクス及びサウンドの内容を、実行ファイルにエクスポートします。
	shader_minifier (https://github.com/laurentlb/Shader_Minifier) によるシェーダコード短縮化、
	および crinkler (http://www.crinkler.net/) による実行ファイル圧縮が適用されます。

- スクリーンショットキャプチャ  
	8bit UnormRGBA 形式の png ファイルとしてスクリーンショットをキャプチャします。

- カメラコントロール  
	マウスによるカメラ操作機能を提供します（利用するかはオプショナル）。

- キューブマップキャプチャ  
	現在のカメラ位置から見える全方位の状態をキューブマップとして FP32RGBA 形式の dds ファイルにキャプチャします。

- サウンドキャプチャ  
	サウンド生成結果を float 2ch 形式の wav ファイルに保存します。

- 連番画像保存  
	グラフィクス生成結果を 8bit UnormRGBA 形式の連番 png ファイルとして保存します。

- 一時停止、スロー再生/スロー巻き戻し、早送り/巻き戻し  

- 全画面化  


# グラフィクス周り機能一覧

- バックバッファテクスチャの利用  
	前回フレームの描画結果をテクスチャとして利用できます。

- マルチプルレンダーターゲット (MRT)  
	MRT4 まで対応します。バックバッファテクスチャも MRT 枚数分利用できます。

- ミップマップ生成  
	バックバッファテクスチャをミップマップ化します。

- LDR/HDR レンダリング  
	LDR (Unorm8 RGBA) および HDR (FP16 FP32) でのレンダリングに対応します。


# 制限事項

Minimal GL には以下の制限事項があります。

- windows exe 専用です

- サウンドはコンピュートシェーダによる生成のみに対応します


# ライセンス

Apache License Version 2.0 が適用されます。

This software includes the work that is distributed in the Apache License 2.0

